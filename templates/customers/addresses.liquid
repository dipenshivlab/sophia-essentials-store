{% include 'settings' %}
{% include 'breadcrumbs' %}
{% include 'content-open' class:'column-max no-padding-top' %}
{% include 'page-header' class:'text-center' %}
{% include 'separator' %}

{% comment %} New address {% endcomment %}
<div class="new-address">
  
  <div class="text-center">
    <button type="button" class="button toggle-address" data-form-id="add_address">
      {{ 'customer.addresses.add_new' | t }}
    </button>
  </div>

  {% comment %} Add address form (hidden by default) {% endcomment %}
  <div id="add_address" class="customer-address" style="display:none">
    {% form 'customer_address', customer.new_address %}
    {% comment %} Include address form fields {% endcomment %}
    {% render 'customer-address-fields', form: form, id: 'new' %}
    {% endform %}
  </div>

</div>

{% comment %} Separator {% endcomment %}
{% if customer.addresses.size > 0 %}
  {% include 'separator' class:'lined margin-top-150 margin-bottom-150' %}
{% endif %}

{% comment %} Existing addresses {% endcomment %}
<div class="customer-addresses">
  {% paginate customer.addresses by 10 %}

  {% for address in customer.addresses %}
    <div id="address_{{ address.id }}" class="customer-address text-center">

      {% if address == customer.default_address %}
        <p class="margin-bottom-50"><strong>{{ 'customer.addresses.default' | t }}</strong></p>
      {% endif %}

      {{ address | format_address }}

      {% comment %} Edit address button {% endcomment %}
      <button type="button" class="button outlined small toggle-address" data-form-id="edit_address_{{ address.id }}">{{ 'customer.addresses.edit' | t }}</button>

      {% comment %} Delete address button {% endcomment %}
      <button type="button" class="button outlined small delete-address" data-form-id="{{ address.id }}" data-confirm-message="{{ 'customer.addresses.delete_confirm' | t }}">{{ 'customer.addresses.delete' | t }}</button>

      {% comment %} Edit address form (hidden by default) {% endcomment %}
      <div id="edit_address_{{ address.id }}" style="display:none;">
        {% form 'customer_address', address %}
          {% comment %} Include address form fields {% endcomment %}
          {% render 'customer-address-fields', form: form, id: form.id %}
        {% endform %}
      </div>

    </div>

    {% comment %} Separator {% endcomment %}
    {% unless forloop.last %}
      {% include 'separator' class:'lined margin-top-150 margin-bottom-150' %}
    {% endunless %}

  {% endfor %}

  {% comment %} Pagination {% endcomment %}
  {% include 'pagination' %}

  {% endpaginate %}
</div>


{% comment %} Separator {% endcomment %}
{% include 'separator' class:'lined margin-top-150 margin-bottom-150' %}

<div class="form-actions text-center no-margin-top width-100">
  <p class="font-size-15 margin-bottom-50">
    {{ 'customer.account.return' | t | link_to: routes.account_url }}
  </p>
</div>

{% include 'content-close' %}
