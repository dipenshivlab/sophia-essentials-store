{%- assign account_text = 'shopify.page_titles.account' | t -%}
{%- assign home_text = 'general.breadcrumbs.home' | t -%}
{%- assign search_text = 'shopify.page_titles.search' | t -%}

{% unless template == 'index' %}
<div class="column-max">
<nav class="breadcrumbs {{ class }}" role="navigation" aria-label="breadcrumbs">

  {% comment %}
    Home
  {% endcomment %}
  {{ home_text | link_to: routes.root_url, home_text }}

  {% comment %}
    Customer account
  {% endcomment %}
  {% if template contains 'customer' %}
    {% if template != 'customers/account' %}
      {{ account_text | link_to: routes.account_url }}
    {% endif %}
  {% endif %}

  {% comment %}
    Collection
  {% endcomment %}
  {% if template contains 'collection' and collection.handle %}
    {% capture collection_url %}{{ routes.root_url }}{% if routes.root_url != '/' %}/{% endif %}collections/{{ collection.handle }}{% endcapture %}
    {{ page_title | link_to: collection_url, page_title }}

  {% comment %}
    Product
  {% endcomment %}
  {% elsif template contains 'product' %}
    {%- assign product_url = product.url -%}
    {% if collection and collection.handle %}
      {% capture collection_url %}{{ routes.root_url }}{% if routes.root_url != '/' %}/{% endif %}collections/{{ collection.handle }}{% endcapture %}
      {%- assign product_url = product.url -%}
      {{ collection.title | link_to: collection_url, collection.title }}
    {% endif %}
    {{ page_title | link_to: product_url, page_title }}

  {% comment %}
    Article
  {% endcomment %}
  {% elsif template == 'article' %}
    {{ blog.title | link_to: blog.url, blog.title }}
    {{ article.title | link_to: article.url, article.title }}

  {% comment %}
    Search
  {% endcomment %}
  {% elsif template contains 'search' %}
    {{ search_text | link_to: routes.search_url, search_text }}

  {% comment %}
    Everything else
  {% endcomment %}
  {% else %}
    {% unless template == 'index' %}
      {{ page_title | link_to: page.url, page_title }}
    {% endunless %}

  {% endif %}

  {% comment %}
    Tags
  {% endcomment %}
  {% if current_tags %}
    {{ current_tags | join: " + " | link_to: "#" }}
  {% endif %}

</nav>
</div>
{% endunless %}
